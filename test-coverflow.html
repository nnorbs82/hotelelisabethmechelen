<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cover Flow Test</title>
    <link rel="stylesheet" href="/home/runner/work/hotelelisabethmechelen/hotelelisabethmechelen/styles.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Cover Flow Navigation Test</h1>
        
        <div class="facility-album-wrapper-fullwidth">
            <div class="coverflow-container" id="coverflow-test" data-facility-id="test">
                <div class="coverflow-wrapper">
                    <div class="coverflow-item active" data-index="0">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/FF0000/FFFFFF?text=Image+1" alt="Image 1">
                        </div>
                    </div>
                    <div class="coverflow-item hidden" data-index="1">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/00FF00/FFFFFF?text=Image+2" alt="Image 2">
                        </div>
                    </div>
                    <div class="coverflow-item hidden" data-index="2">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/0000FF/FFFFFF?text=Image+3" alt="Image 3">
                        </div>
                    </div>
                    <div class="coverflow-item hidden" data-index="3">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/FFFF00/000000?text=Image+4" alt="Image 4">
                        </div>
                    </div>
                    <div class="coverflow-item hidden" data-index="4">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/FF00FF/FFFFFF?text=Image+5" alt="Image 5">
                        </div>
                    </div>
                    <div class="coverflow-item hidden" data-index="5">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/00FFFF/000000?text=Image+6" alt="Image 6">
                        </div>
                    </div>
                    <div class="coverflow-item hidden" data-index="6">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/FFA500/FFFFFF?text=Image+7" alt="Image 7">
                        </div>
                    </div>
                    <div class="coverflow-item hidden" data-index="7">
                        <div class="coverflow-item-inner">
                            <img src="https://via.placeholder.com/400x300/800080/FFFFFF?text=Image+8" alt="Image 8">
                        </div>
                    </div>
                </div>
                <button class="coverflow-nav coverflow-nav-prev" onclick="navigateCoverflow('test', -1, event)" aria-label="Previous image">‹</button>
                <button class="coverflow-nav coverflow-nav-next" onclick="navigateCoverflow('test', 1, event)" aria-label="Next image">›</button>
                <div class="coverflow-badge">8 Photos</div>
            </div>
        </div>

        <div style="margin-top: 30px; text-align: center;">
            <p>Current Index: <span id="current-index">0</span></p>
            <p>Click the arrows or use keyboard arrows to navigate</p>
        </div>
    </div>

    <script>
        // Cover Flow initialization and navigation
        const coverflowStates = {};

        function initCoverflow(facilityId) {
            const container = document.getElementById(`coverflow-${facilityId}`);
            if (!container) return;

            const items = Array.from(container.querySelectorAll('.coverflow-item'));
            if (items.length === 0) return;

            coverflowStates[facilityId] = {
                currentIndex: 0,
                items: items,
                isAnimating: false
            };

            updateCoverflowPositions(facilityId);

            // Add keyboard support
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    navigateCoverflow(facilityId, -1);
                } else if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    navigateCoverflow(facilityId, 1);
                }
            });
        }

        function updateCoverflowPositions(facilityId) {
            const state = coverflowStates[facilityId];
            if (!state) return;

            const { currentIndex, items } = state;
            const total = items.length;

            items.forEach((item, index) => {
                // Remove all position classes
                item.classList.remove('active', 'left-1', 'left-2', 'left-3', 'right-1', 'right-2', 'right-3', 'hidden', 'hidden-left', 'hidden-right');

                const diff = index - currentIndex;

                if (diff === 0) {
                    item.classList.add('active');
                } else if (diff === -1 || (diff === total - 1 && currentIndex === 0)) {
                    item.classList.add('left-1');
                } else if (diff === -2 || (diff === total - 2 && currentIndex <= 1)) {
                    item.classList.add('left-2');
                } else if (diff === -3 || (diff === total - 3 && currentIndex <= 2)) {
                    item.classList.add('left-3');
                } else if (diff === 1 || (diff === -(total - 1) && currentIndex === total - 1)) {
                    item.classList.add('right-1');
                } else if (diff === 2 || (diff === -(total - 2) && currentIndex >= total - 2)) {
                    item.classList.add('right-2');
                } else if (diff === 3 || (diff === -(total - 3) && currentIndex >= total - 3)) {
                    item.classList.add('right-3');
                } else {
                    // Determine if item should be hidden on left or right
                    // Items with indices less than currentIndex - 3 should be hidden on the left
                    // Items with indices greater than currentIndex + 3 should be hidden on the right
                    const normalizedDiff = ((index - currentIndex) + total) % total;
                    if (normalizedDiff > total / 2) {
                        item.classList.add('hidden-left');
                    } else {
                        item.classList.add('hidden-right');
                    }
                }
            });

            // Update display
            document.getElementById('current-index').textContent = currentIndex;
        }

        function navigateCoverflow(facilityId, direction, event) {
            if (event) {
                event.stopPropagation();
            }

            const state = coverflowStates[facilityId];
            if (!state || state.isAnimating) return;

            state.isAnimating = true;
            const total = state.items.length;
            state.currentIndex = (state.currentIndex + direction + total) % total;

            updateCoverflowPositions(facilityId);

            setTimeout(() => {
                state.isAnimating = false;
            }, 600);
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            initCoverflow('test');
        });
    </script>
</body>
</html>
